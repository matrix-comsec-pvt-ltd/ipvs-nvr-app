#ifndef MAXMPEG2TSPARSER_H_
#define MAXMPEG2TSPARSER_H_
//#################################################################################################
// FILE BRIEF
//#################################################################################################
/**
@file   MxMp2TsParser.h
@brief  This Module provides APIS to interact with mpeg2-ts parser.
*/
//#################################################################################################
// @INCLUDES
//#################################################################################################
/* Application Includes */
#include "Config.h"
#include "HttpClient.h"

//#################################################################################################
// @DEFINES
//#################################################################################################
#define MAX_MP2_SESSION 		MAX_CAMERA
#define INVALID_MP2_SESSION 	0xFF

//#################################################################################################
// @DATA TYPES
//#################################################################################################
typedef  UINT8 MP2_TS_SESSION;

typedef struct
{
	UINT32 				frameSize;
	STREAM_TYPE_e 		streamType;
	STREAM_CODEC_TYPE_e codecType;
	UINT8PTR			framePtr;

}MP2_DATA_INFO_t;

typedef struct
{
	MP2_TS_SESSION      session;
	UINT8PTR			data;
	UINT32 				dataLen;
	MP2_DATA_INFO_t		mp2DataInfo;

}MP2_CLIENT_INFO_t;

typedef void (*MP2_TS_CALLBACK)		(HTTP_HANDLE httpHandle, MP2_CLIENT_INFO_t *mp2TsData);

//#################################################################################################
// @PROTOTYPES
//#################################################################################################
//-------------------------------------------------------------------------------------------------
void InitMp2TsClient(void);
//-------------------------------------------------------------------------------------------------
BOOL StartMp2TsParser(MP2_TS_SESSION *sessionIndex);
//-------------------------------------------------------------------------------------------------
BOOL ParseMp2TsData(HTTP_HANDLE httpHandle, MP2_CLIENT_INFO_t *mp2ClientInfo, MP2_TS_CALLBACK frameCallback);
//-------------------------------------------------------------------------------------------------
BOOL StopMp2TsParser(MP2_TS_SESSION session);
//-------------------------------------------------------------------------------------------------
//#################################################################################################
// @END OF FILE
//#################################################################################################
#endif /* MAXMPEG2TSPARSER_H_ */
